<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <title>Document</title>
    <style>
        .error {
            color: #f00;
            font-size: 12px;
        }
    </style>
    </head>
    <body>
        <form id="registrationForm" method="signup">
            <div>
                <label>아이디<input type="text" name="id" id="id" /></label>
                <span id="idError" class="error"></span>
            </div>
            <div>
                <label>비밀번호<input type="password" name="password" id="password" /></label>
                <span id="passwordError" class="error"></span>
            </div>
            <div>
                <label>이름<input type="text" name="name" id="name" /></label>
                <span id="nameError" class="error"></span>
            </div>
            <div>
                <label>이메일<input type="text" name="email" id="email" /></label>
                <span id="emailError" class="error"></span>
            </div>
            <div>
                <label>전화번호<input type="tel" name="phoneNumber" id="phoneNumber" /></label>
                <span id="phoneNumberError" class="error"></span>
            </div>
            <button type="submit">회원가입</button>
        </form>
        <script>
            $("#registrationForm").submit(function(e){
                event.preventDefault();

                const id = $("#id").val(); // 여기서 val()은 인풋의 입력값
                const password = $("#password").val();
                const name = $("#name").val();
                const email = $("#email").val();
                const phoneNumber = $("#phoneNumber").val();


                const idRegex = /^[a-z0-9]{6,10}$/;
                if (!id.match(idRegex)) {
                    showError("idError", "아이디는 6자에서 10자의 영문 소문자와 숫자만 가능합니다.");
                }

                // 비밀번호 유효성 검사
                const passwordRegex = /^(?=.[a-zA-Z])(?=.\d)(?=.*[@!#$%^&*])[a-zA-Z\d@!#$%^&*]{10,20}$/;
                if (!password.match(passwordRegex)) {
                    showError("passwordError", "비밀번호는 10자에서 20자의 영문 대소문자, 숫자, 특수문자 조합이어야 합니다.");
                }

                // 이름 유효성 검사
                const nameRegex = /^[a-zA-Z가-힣]{2,6}$/;
                if (!name.match(nameRegex)) {
                    showError("nameError", "이름은 2자에서 6자의 한글 또는 영문(대,소문자)만 가능합니다.");
                }

                // 이메일 유효성 검사
                const emailRegex = /^[a-z0-9]+@[a-z0-9]+.[a-z]+$/;
                if (!email.match(emailRegex) || emailDomain === '') {
                    showError("emailError", "이메일 형식이 올바르지 않습니다.");
                }

                // 전화번호 유효성 검사 (하이픈 자동 입력)
                const phoneNumberRegex = /^\d{3}-\d{3,4}-\d{4}$/;
                if (!phoneNumber.match(phoneNumberRegex)) {
                    showError("phoneNumberError", "전화번호는 숫자만 입력하고 하이픈(-)을 포함해야 합니다.");
                }
            });
            function showError(elenentID, errorMessage){
                    $("#" + elenentID).text(errorMessage);
            }

            $("#id, #password, #name, #email, #phoneNumber").on("input", function(){
                const id = $("#id").val(); // 여기서 val()은 인풋의 입력값
                const password = $("#password").val();
                const name = $("#name").val();
                const email = $("#email").val();
                const phoneNumber = $("#phoneNumber").val();

                //오류메시지 초기화
                $(".error").text("");

                const idRegex = /^[a-z0-9]{6,10}$/;
                if (id && !id.match(idRegex)) {
                    showError("idError", "아이디는 6자에서 10자의 영문 소문자와 숫자만 가능합니다.");
                }

                // 비밀번호 유효성 검사
                const passwordRegex =/^(?=.[a-zA-Z])(?=.\d)(?=.*[@!#$%^&*])[a-zA-Z\d@!#$%^&*]{10,20}$/;
                if (password && !password.match(passwordRegex)) {
                    showError("passwordError", "비밀번호는 10자에서 20자의 영문 대소문자, 숫자, 특수문자 조합이어야 합니다.");
                }

                // 이름 유효성 검사
                const nameRegex = /^[a-zA-Z가-힣]{2,6}$/;
                if (name && !name.match(nameRegex)) {
                    showError("nameError", "이름은 2자에서 6자의 한글 또는 영문(대,소문자)만 가능합니다.");
                }

                // 이메일 유효성 검사
                const emailRegex = /^[a-z0-9]+@[a-z0-9]+.[a-z]+$/;
                if (email && !email.match(emailRegex) || emailDomain === '') {
                    showError("emailError", "이메일 형식이 올바르지 않습니다.");
                }

                // 전화번호 유효성 검사 (하이픈 자동 입력)
                const phoneNumberRegex = /^\d{3}-\d{3,4}-\d{4}$/;
                if (phoneNumber && !phoneNumber.match(phoneNumberRegex)) {
                    showError("phoneNumberError", "전화번호는 숫자만 입력하고 하이픈(-)을 포함해야 합니다.");
                }
            });
        </script>        
    </body>
</html>